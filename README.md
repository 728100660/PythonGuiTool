# 服务器配表更新GUI系统

## 系统架构

### 1. 核心模块

#### 1.1 主程序模块 (main.py)
- 系统入口点
- 初始化应用程序和各个核心模块
- 创建并显示主窗口

#### 1.2 文件管理模块 (file_manager.py)
- 负责文件系统操作
- 实现文件树结构生成
- 文件变更检测
- 版本对比功能

#### 1.3 服务器API模块 (server_api.py)
- 处理与服务器的通信
- 管理测试任务的执行
- 处理测试结果的收集和更新
- 提供服务器配置管理

#### 1.4 数据库模块 (database.py)
- 管理本地配置数据
- 存储历史记录
- 保存用户偏好设置

### 2. 界面模块

#### 2.1 主窗口 (main_window.py)
- 实现主界面布局
- 集成文件树显示
- 管理配置面板
- 处理用户交互

#### 2.2 结果显示组件 (src/views/widgets/)
- result_tab_widget.py: 测试结果标签页
- result_chart_widget.py: 图表显示组件

#### 2.3 配置对话框 (src/views/dialogs/)
- config_dialog.py: 配置编辑界面

## 设计思路

### 1. 数据流设计
- 文件变更检测 -> 配置更新 -> 服务器同步
- 测试执行 -> 数据收集 -> 结果展示
- 实时数据更新和图表显示

### 2. 用户交互设计
- 直观的文件树展示
- 可视化的配置编辑
- 实时的测试结果反馈
- 图表化的数据展示

## 环境准备

### 1. 系统要求
- Python 3.10 或更高版本
- Windows操作系统

### 2. 依赖安装
```bash
# 安装Python依赖
pip install -r requirements.txt

# 主要依赖包括：
# - PyQt6>=6.0.0：GUI框架
# - pyqtchart>=6.0.0：图表显示
# - json5>=0.9.0：JSON处理
# - requests>=2.31.0：HTTP请求
```

## 使用说明

### 1. 启动程序
```bash
python main.py
```

### 2. 基本操作流程
1. 选择工程目录：点击"选择工程目录"按钮
2. 选择结果存储目录：点击"选择结果存储目录"按钮
3. 选择配置类型：task_info/initial_info/old_game
4. 编辑配置：点击"编辑配置"按钮：注意，编辑的配置不能随便编辑参数，否则会导致服务器报错404
5. 选择目标服务器
6. 提交更新：点击"提交更新"按钮

### 3. 查看测试结果
- 结果以标签页形式显示
- 支持图表和数据表格查看
- 可导出测试数据
- 后台输出print内容

## 打包说明

### 1. 使用PyInstaller打包
```bash
# 安装PyInstaller
pip install pyinstaller

# 执行打包命令
在项目根目录下执行
pyinstaller --onefile --console main.py
```